<!--
# COPYRIGHT NOTICE
# This file is part of the "Universal AI Agentic Skills" project.
# Copyright (c) 2026 MD BABU MIA, PhD <md.babu.mia@mssm.edu>
# All Rights Reserved.
#
# This code is proprietary and confidential.
# Unauthorized copying of this file, via any medium is strictly prohibited.
#
# Provenance: Authenticated by MD BABU MIA

-->

# Using Code Interpreter with AI Agents

This sample demonstrates how to use the code interpreter tool with AI agents. The code interpreter allows agents to write and execute Python code to solve problems, perform calculations, and analyze data.

## What this sample demonstrates

- Creating agents with code interpreter capabilities
- Using HostedCodeInterpreterTool (MEAI abstraction)
- Using native SDK code interpreter tools (ResponseTool.CreateCodeInterpreterTool)
- Extracting code inputs and results from agent responses
- Handling code interpreter annotations
- Managing agent lifecycle (creation and deletion)

## Prerequisites

Before you begin, ensure you have the following prerequisites:

- .NET 10 SDK or later
- Azure Foundry service endpoint and deployment configured
- Azure CLI installed and authenticated (for Azure credential authentication)

**Note**: This demo uses Azure CLI credentials for authentication. Make sure you're logged in with `az login` and have access to the Azure Foundry resource. For more information, see the [Azure CLI documentation](https://learn.microsoft.com/cli/azure/authenticate-azure-cli-interactively).

Set the following environment variables:

```powershell
$env:AZURE_FOUNDRY_PROJECT_ENDPOINT="https://your-foundry-service.services.ai.azure.com/api/projects/your-foundry-project" # Replace with your Azure Foundry resource endpoint
$env:AZURE_FOUNDRY_PROJECT_DEPLOYMENT_NAME="gpt-4o-mini"  # Optional, defaults to gpt-4o-mini
```

## Run the sample

Navigate to the FoundryAgents sample directory and run:

```powershell
cd dotnet/samples/GettingStarted/FoundryAgents
dotnet run --project .\FoundryAgents_Step14_CodeInterpreter
```

## Expected behavior

The sample will:

1. Create two agents with code interpreter capabilities:
   - Option 1: Using HostedCodeInterpreterTool (MEAI abstraction)
   - Option 2: Using native SDK code interpreter tools
2. Run the agent with a mathematical problem: "I need to solve the equation sin(x) + x^2 = 42"
3. The agent will use the code interpreter to write and execute Python code to solve the equation
4. Extract and display the code that was executed
5. Display the results from the code execution
6. Display any annotations generated by the code interpreter tool
7. Clean up resources by deleting both agents



<!-- AUTHOR_SIGNATURE: 9a7f3c2e-MD-BABU-MIA-2026-MSSM-SECURE -->